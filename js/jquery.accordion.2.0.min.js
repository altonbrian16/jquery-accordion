(function(c){c.fn.accordion=function(h){var a={handle:"h3",panel:".panel",speed:200,easing:"swing",accordion:true,toggle:false,activeClassPanel:"open",activeClassLi:"active",lockedClass:"locked"};h&&c.extend(a,h);this.each(function(){var e=c(this),i={height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0};e.find(">li>"+a.panel).each(function(){var b=c(this);b.data("dimensions",{height:b.css("height"),marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),paddingTop:b.css("paddingTop"),
paddingBottom:b.css("paddingBottom")}).bind("accordion-panel-open",function(d,f){var g=c(this);g.css(c.extend({overflow:"hidden"},i)).show().animate(c.extend({opacity:1},g.data("dimensions")),{duration:a.speed,easing:a.easing,queue:false,complete:function(){g.addClass(a.activeClassPanel);f.addClass(a.activeClassLi)}})}).bind("accordion-panel-close",function(){var d=c(this);d.css({overflow:"hidden"}).animate(c.extend({opacity:0},i),{duration:a.speed,easing:a.easing,queue:false,complete:function(){d.removeClass(a.activeClassPanel).hide();
d.closest("li").removeClass(a.activeClassLi)}})});return b}).hide();e.find(" > li > "+a.handle).wrapInner('<a class="accordion-opener" href="#open-panel" />');e.find(" > li."+a.activeClassLi+" > "+a.panel+", > li."+a.lockedClass+" > "+a.panel).show().addClass(a.activeClassPanel);var j=e.find(" > li."+a.activeClassLi+", > li."+a.lockedClass);!a.toggle&&j.length<1&&e.find(" > li").first().addClass(a.activeClassLi).find(" > "+a.panel).addClass(a.activeClassPanel).show();e.delegate(".accordion-opener",
"click",function(b){b.preventDefault();b.stopImmediatePropagation();b=c(this).closest("li");var d=b.find(">"+a.panel).first(),f=e.find(" > li:not(."+a.lockedClass+") > "+a.panel+"."+a.activeClassPanel);if(!b.hasClass(a.lockedClass))if(d.is(":visible"))a.toggle&&d.trigger("accordion-panel-close");else{d.trigger("accordion-panel-open",[b]);a.accordion&&f.trigger("accordion-panel-close")}})});return this}})(jQuery);