(function(d){d.fn.accordion=function(h){var a={handle:"h3",panel:".panel",speed:200,easing:"swing",accordion:true,toggle:false,activeClassPanel:"open",activeClassLi:"active",lockedClass:"locked"};h&&d.extend(a,h);this.each(function(){var e=d(this);e.find(">li>"+a.panel).each(function(){var b=d(this);b.data("dimensions",{height:b.css("height"),marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),paddingTop:b.css("paddingTop"),paddingBottom:b.css("paddingBottom")}).bind("panel-open",function(c,
g){var f=d(this);f.css({height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0,overflow:"hidden"}).show().animate({height:f.data("dimensions").height,marginTop:f.data("dimensions").marginTop,marginBottom:f.data("dimensions").marginBottom,paddingTop:f.data("dimensions").paddingTop,paddingBottom:f.data("dimensions").paddingBottom,opacity:1},{duration:a.speed,easing:a.easing,queue:false,complete:function(){f.addClass(a.activeClassPanel);g.addClass(a.activeClassLi)}})}).bind("panel-close",function(){var c=
d(this);c.css({overflow:"hidden"}).animate({height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0},{duration:a.speed,easing:a.easing,queue:false,complete:function(){c.removeClass(a.activeClassPanel).hide();c.closest("li").removeClass(a.activeClassLi)}})});return b}).hide();e.find(">li>"+a.handle).wrapInner('<a class="accordion-opener" href="#open-panel" />');e.find("> li."+a.activeClassLi+" > "+a.panel+", > li."+a.lockedClass+" > "+a.panel).show().addClass(a.activeClassPanel);
var i=e.find("> li."+a.activeClassLi+", > li."+a.lockedClass);!a.toggle&&i.length<1&&e.find("> li").first().addClass(a.activeClassLi).find(" > "+a.panel).addClass(a.activeClassPanel).show();e.delegate(".accordion-opener","click",function(b){b.preventDefault();b.stopImmediatePropagation();b=d(this).closest("li");var c=b.find(">"+a.panel).first(),g=e.find(">li:not(."+a.lockedClass+")>"+a.panel+"."+a.activeClassPanel);if(!b.hasClass(a.lockedClass))if(c.is(":visible"))a.toggle&&c.trigger("panel-close");
else{c.trigger("panel-open",[b]);a.accordion&&g.trigger("panel-close")}})});return this}})(jQuery);