(function(c){c.fn.accordion=function(g){var a={handle:"h3",panel:".panel",speed:200,easing:"swing",accordion:true,toggle:false,activeClassPanel:"open",activeClassLi:"active",lockedClass:"locked"};g&&c.extend(a,g);this.each(function(){var e=c(this),h={height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0};e.find(">li>"+a.panel).each(function(){var b=c(this);b.data("dimensions",{marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),paddingTop:b.css("paddingTop"),paddingBottom:b.css("paddingBottom"),height:b.get(0).offsetHeight-parseInt(b.css("paddingTop"))-parseInt(b.css("paddingBottom"))}).bind("panel-open.accordion",function(d,f){var i=c(this);f.addClass(a.activeClassLi);i.css(c.extend({overflow:"hidden"},h)).addClass(a.activeClassPanel).show().animate(c.extend({opacity:1},i.data("dimensions")),{duration:a.speed,easing:a.easing,queue:false,complete:function(){}})}).bind("panel-close.accordion",function(){var d=c(this);d.closest("li").removeClass(a.activeClassLi);d.removeClass(a.activeClassPanel).css({overflow:"hidden"}).animate(c.extend({opacity:0},h),{duration:a.speed,easing:a.easing,queue:false,complete:function(){d.hide()}})});return b}).hide();e.find(" > li > "+a.handle).wrapInner('<a class="accordion-opener" href="#open-panel" />');e.find(" > li."+a.activeClassLi+" > "+a.panel+", > li."+a.lockedClass+" > "+a.panel).show().addClass(a.activeClassPanel);var j=e.find(" > li."+a.activeClassLi+", > li."+a.lockedClass);!a.toggle&&j.length<1&&e.find(" > li").first().addClass(a.activeClassLi).find(" > "+a.panel).addClass(a.activeClassPanel).show();e.delegate(".accordion-opener","click",function(b){b.preventDefault();b.stopImmediatePropagation();b=c(this).closest("li");var d=b.find(">"+a.panel).first(),f=e.find(" > li:not(."+a.lockedClass+") > "+a.panel+"."+a.activeClassPanel);if(!b.hasClass(a.lockedClass))if(d.is(":visible"))a.toggle&&d.trigger("panel-close");else{d.trigger("panel-open",[b]);a.accordion&&f.trigger("panel-close")}})});return this}})(jQuery);